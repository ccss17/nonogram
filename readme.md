# nonogram

## Philosophy

### Idea

#### Definition 

- **패턴(Pattern)** : 키 값으로 정해질 수 있는 라인의 모양의 모든 경우의 집합 

  - 예시 : 키 값이 "2 1" 이고 라인의 길이가 5 일때 패턴은 집합 {"ooxox", "ooxxo", "xooxo"} 이다. 

- **패턴의 복잡도(Complexity of pattern)** : 패턴이 지니는 원소의 개수 

  - 예시 : 위의 예시에서 패턴의 복잡도는 3 이다. 

- **패턴의 교집합(Consensus of pattern)** : 패턴이 지니는 모든 원소들이 공통적으로 갖고 있는 동일한 블록들의 위치정보와 상태정보를 가진 집합 

  - 예시 : 위의 예시에서 패턴의 교집합은 "?o???" 이다. 

- **패턴의 축소(Reduction of pattern)** : 결정된 블록에 근거하여 존재하지 않는 패턴을 을 삭제하는 것.  

  - 예시 : 위의 예시에서 결정된 블록이 "???x?" 이라 할 때 패턴은 집합 {"ooxxo", "xooxo"} 으로 축소된다. 

- **패턴의 교집합의 확장(Expansion of consensus of pattern)** : 패턴의 축소로 인하여 패턴이 공통적으로 갖는 동일한 블록들이 늘어난 것 

  - 예시 : 위의 예시에서 결정된 블록이 "???x?" 이라 할 때 패턴은 집합 {"ooxxo", "xooxo"} 으로 축소되었다. 이때 패턴의 교집합은 "?o???" 에서 "?o?xo" 으로 확장된다. 

#### Solution

1. **네모로직의 생성** : 키 값으로 패턴이 결정된다. 

  - 그런데 패턴은 여러 형태를 가질 수 있기 때문에 라인의 블록들이 한번에 결정되지 않는다.

  - 만약 모든 패턴 형태가 동의하는 교집합이 존재하지 않으면 네모로직을 풀 수 없다.
  
  - 하지만 풀 수 있는 네모로직은 모든 패턴 형태가 동의하는 교집합이 존재한다. 

2. **패턴의 교집합 찾기** : 모든 패턴 형태가 동의하는 교집합으로 라인의 일부 블록을 결정할 수 있다. 

3. **다른 라인의 패턴 축소** : 블록이 결정되면 그 블록을 포함하는 다른 라인의 패턴이 축소되고 이에 따라 해당 라인의 패턴의 교집합이 확장된다. 

4. **2 와 3의 반복** : 다른 라인의 교집합이 확장되었다면 다시 라인의 일부 블록을 결정할 수 있고 결정된 블록을 포함하는 다른 라인의 패턴이 축소된다. 이에 따라 또 다시 해당 라인의 패턴의 교집합이 확장된다. 

5. 이때 다음 반복로직은 패턴의 복잡도가 1 이 될 때 끝나며 그 시점에서 네모로직은 풀려있게 된다. 

  - 반복로직 : **(패턴의 교집합 찾기)** &rarr; **(다른 라인의 패턴 축소)** &rarr; **(패턴의 교집합 찾기)** &rarr; **(다른 라인의 패턴 축소)** &rarr; ... 

#### Further discussion

- 패턴의 복잡도와 패턴의 교집합에 관하여 

### Policy

#### Definition 

  - 키 값의 개수 = `len(k)`

  - 키 값 = `k`

  - 첫번째 키 값 = `k[0]`

  - 마지막 키 값 = `k[len(k)-1]`

  - 키 값의 합 = `sum(k)`

  - 칸 수 = `n`

  - 이미 칠해진 칸 수 = `m`

  - 칸 전체를 O 으로 칠하기 = `line_on()`

  - 칸 전체를 X 으로 칠하기 = `line_off()`

  - 칠해지지 않은 칸을 O 으로 칠하기 = `remain_on()`

  - 칠해지지 않은 칸을 X 로 칠하기 = `remain_off()`

#### Algorithm

  1. `if (len(k) == 1) if (k[0] == n) line()`

  2. `if (len(k) > 1) if (sum(k) + len(k) - 1 == n) line()`

    - POLICY 1 과 POLICY 2 는 if (sum(k) + len(k) - 1 == n) line() 하나로 축약될 수 있음. 

  3. `if (len(k) == 1) if (m == k[0]) remain_off()`